# syntax=docker/dockerfile:1.4.1

FROM rust:1.62-buster AS cli
WORKDIR /src
ENV RUST_BACKTRACE=1
ENV DEV_MODE=on
RUN apt-get update && apt-get install -y \
    clang \
    libclang-dev \
    cmake
RUN git clone https://github.com/pyrsia/pyrsia.git
WORKDIR /src/pyrsia
RUN cargo build --profile=release --package=pyrsia_cli && cp ./target/release/pyrsia /usr/bin
